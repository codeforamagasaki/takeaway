class Glottologist{assign(t,e){let n={};n[t]=e,this.data=Object.assign(this.data,n)}async autoGen(t){const e=document.querySelectorAll("[glot-model]");for(let n=0;n<e.length;n++){const o=e[n].getAttribute("glot-model");let a={};for(let o of t){const t=await this.gTranslate(e[n].innerHTML,o);a[o]=t}this.assign(o,a)}}constructor(t="en"){this.data={},this.pageLang=t,"function"==typeof require&&(this.JSDOM=require("jsdom").JSDOM),"undefined"!=typeof window?this.lang=navigator.language||navigator.userLanguage:this.lang=t}gTranslate(t,e="en",n="auto"){return new Promise((o,a)=>{const l="https://translate.googleapis.com/translate_a/single?client=gtx&sl="+n+"&tl="+e+"&dt=t&q="+encodeURI(t);fetch(l).then(t=>{t.json().then(t=>{o(t[0][0][0])}).catch(t=>{a(t)})}).catch(t=>{a(t)})})}get(name,lang="auto",obj={}){let data={},tmp,result;return"object"==typeof lang&&(data=lang,lang="string"==typeof obj?obj:"auto"),"auto"==lang?(tmp=this.data[name][new String(this.lang).split("-")[0]],result=void 0==tmp?this.data[name][Object.keys(this.data[name])[0]]:tmp):(tmp=this.data[name][lang],result=void 0==tmp?this.data[name][Object.keys(this.data[name])[0]]:tmp),eval("`"+result+"`")}import(t){return new Promise((e,n)=>{fetch(t).then(t=>{t.json().then(t=>{this.data=Object.assign(this.data,t),e(t)}).catch(t=>{n(t)})}).catch(t=>{n(t)})})}locale(){const t=[...arguments];if(0==t.length){if("undefined"!=typeof window){navigator.language||navigator.userLanguage;const t=new String(this.lang).split("-")[0];return this.lang=t,this.lang}return this.lang="en",this.lang}return this.lang=t[0],this.lang}render(t="auto"){const e=document.querySelectorAll("[glot-model]");for(let n=0;n<e.length;n++){const o=e[n].getAttribute("glot-model"),a=this.get(o,t);null!=a&&this.pageLang!=t&&(e[n].innerHTML=a)}}serverRender(t,e){if(void 0===this.JSDOM)return;const n=new this.JSDOM(t),{document:o}=n.window,a=o.querySelectorAll("[glot-model]");for(let t=0;t<a.length;t++){const n=a[t].getAttribute("glot-model"),o=this.get(n,e);null!=o&&this.pageLang!=e&&(a[t].innerHTML=o)}return n.serialize()}}"function"==typeof define&&define.amd?define(()=>new Glottologist):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new Glottologist),exports.Glottologist=new Glottologist):"undefined"!=typeof global&&(global.Glottologist=new Glottologist);